# 4-2. 위험 시나리오 테스트 데이터/응답 품질 개선

## 작업 목적
테스트 이벤트가 단순 문구에 치우쳐 실제 대응 품질을 검증하기 어려워, 시뮬레이터와 fallback 응답 품질을 개선했다.

## 구현 범위
- 시뮬레이터 위험 시나리오 확장
  - `fire`, `fall`, `intrusion`, `electrical`, `mixed`
  - 시나리오별 summary/신뢰도 범위 랜덤 생성
- LLM 구조화 출력 스키마 강화
  - 운영자 대응 문장 최소/최대 길이 및 상세 지시 조건 강화
  - Jetson TTS를 1~2문장 지침 형태로 제약
- Gemini 실패 시 fallback 품질 개선
  - 위험 유형별 템플릿 대응(화재/전기/침입/낙상/일반)
- Edge 임시 추론 결과 요약문 구체화
  - 휴리스틱 메타데이터(hazard_type, RGB 통계) 확장

## 변경 파일
- `src/sim/send_mock_danger_event.py`
- `src/api/models.py`
- `src/api/services/llm_responder.py`
- `src/edge/vlm_client.py`

## 확인 포인트
- `--scenario mixed` 테스트 시 위험 유형별 요약문이 다양하게 생성됨
- Gemini 쿼터 초과 시에도 fallback 문장이 행동 지침형으로 유지됨
